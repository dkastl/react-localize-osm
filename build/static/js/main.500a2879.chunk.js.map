{"version":3,"sources":["components/Map/MapView.js","components/Map/getIcon.js","components/Map/MarkerWithFocus.js","config/map.js","components/Map/Map.js","components/Map/index.js","components/NotLoggedInGreeting.js","components/ItemsFilters/CheckboxButton.js","components/ItemsFilters/CheckboxGroup.js","components/ItemsFilters/CheckboxDropdownItem.js","components/ItemsFilters/CheckboxDropdownGroup.js","components/common/LoadingButton.js","components/ItemsFilters/ItemsFilters.js","components/ItemsFilters/index.js","components/ItemsTable/ItemTableHeader.js","components/ItemsTable/ItemTableRow.js","components/ItemsTable/ItemsTable.js","components/ItemsTable/index.js","components/AppNavbar/UserLoggedIn.js","components/AppNavbar/UserLoggedOut.js","assets/logo.svg","components/AppNavbar/index.js","components/AppNavbar/AppNavbar.js","api/Overpass.js","api/OSM.js","utils/CookieManager.js","utils/UpdatesStorage.js","config/auth.js","config/interface.js","App.js","reportWebVitals.js","index.js"],"names":["toArray","coord","lat","lng","MapView","onLoad","onMove","onClick","center","zoom","map","useMap","c","getCenter","flyTo","useMapEvents","move","bbox","Object","values","getBounds","getZoom","click","createIcon","type","color","shape","L","AwesomeMarkers","icon","prefix","markerColor","className","createIcons","touched","focused","defaultIcon","iconTypes","cat","tag","iconType","getIcon","item","find","tags","indexOf","MarkerWithFocus","position","markerRef","useRef","eventHandlers","useMemo","Marker","ref","mapConfig","tileUrl","attribution","minZoom","maxZoom","getItemPosition","lon","Map","items","lang","handlers","onClickItem","onClickMap","addLang","MapContainer","scrollWheelZoom","TileLayer","url","id","ScaleControl","NotLoggedInGreeting","CheckboxButton","vkey","title","onChange","checked","Button","variant","size","FormCheck","CheckboxGroup","itemsList","selected","min","Checkbox","key","i","length","slice","toggle","CheckboxDropdownItem","Dropdown","Item","onMouseDown","e","stopPropagation","active","CheckboxDropdownGroup","useState","dpShow","setDpShow","useEffect","fn","document","addEventListener","removeEventListener","DropdownButton","show","preventDefault","rootCloseEvent","LoadingButton","loading","disabled","props","Spinner","as","animation","ItemsFilters","filters","setFilter","tagsList","languages","languagesList","getItems","updateItems","setLanguages","Form","Row","Text","Col","Control","label","value","limit","target","Check","hideFilled","updates","ItemTableHeader","titles","style","cursor","toLowerCase","onFocus","onBlur","onIconClick","firstInput","current","focus","float","name","ItemsTable","sortField","setField","sortOrder","setOrder","Table","field","filter","sort","i1","i2","localeCompare","compareTags","UserLoggedIn","user","logout","img","Image","src","href","thumbnail","rounded","Navbar","display_name","UserLoggedOut","login","AppNavbar","bg","Brand","logo","alt","loggedIn","defaultApiUrl","Overpass","config","this","apiUrl","baseEls","t","area","join","elementsQuery","base","l","query","data","FormData","append","reqId","performance","now","Promise","resolve","reject","fetch","method","headers","body","URLSearchParams","then","response","ok","json","elements","remark","text","catch","err","appTag","json2xml","entries","k","v","attrs","children","forEach","k1","v1","Array","isArray","k11","replace","obj","push","attrsStr","createOsmChange","changesetId","osmChange","version","generator","modify","nodes","members","changeset","nd","OSMApi","auth","osmAuth","overpass","overpassApiUrl","apiRoute","currentChangeset","route","options","opts","xhr","path","content","header","res","JSON","parse","authenticated","authenticate","fetchJson","checkChangesetOpen","open","updateChangeset","createChangeset","osm","createdId","pop","diffRes","fromEntries","from","el","getAttribute","CookieManager","duration","cookieDuration","cookie","split","s","trim","dict","dateStr","Date","toUTCString","hasEmpty","langs","UpdatesStorage","storageKey","window","localStorage","getItem","setItem","stringify","diff","store","itemsSync","n","authConfig","oauth_consumer_key","oauth_secret","cookieKeys","itemCenter","App","cookieManager","osmApi","get","updatesStorage","load","parseURLPath","parseURLQuery","state","itemsToUpdate","focusedItem","watchFocus","serverMsg","error","hash","history","location","search","params","cleanedTags","t1","parseInt","isNaN","hide_filled","toFixed","searchParts","getUser","setState","str","storeLanguages","write","getLanguages","getElements","sync","console","log","setServerMsg","updateLocation","updateElements","patchAndStore","String","toString","itemId","Math","max","btnsDisabled","keys","touchedItems","mapHandlers","updateBbox","bind","updatePosition","focusItem","blurItem","itemHandlers","updateItem","centerItem","Container","fluid","Card","Header","Body","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.500a2879.chunk.js","sourcesContent":["import {useMapEvents, useMap} from 'react-leaflet';\n\nconst toArray = coord => [coord.lat, coord.lng];\n\nexport default function MapView({onLoad, onMove, onClick, center, zoom}) {\n    const map = useMap();\n    let c = map.getCenter();\n    if(c.lat !== center[0] || c.lng !== center[1])\n        map.flyTo(center, zoom);\n        \n    useMapEvents({\n        move: () => {\n            let c = map.getCenter();\n            onMove({\n                bbox: Object.values(map.getBounds()).map(toArray),\n                center: toArray(c),\n                zoom: map.getZoom()\n            });\n        },\n        click: () => {\n            onClick();\n        }\n    });\n    onLoad({\n        bbox: Object.values(map.getBounds())\n            .map(toArray),\n    });\n    return null;\n}\n","import L from 'leaflet';\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet.awesome-markers/dist/leaflet.awesome-markers.js\";\nimport \"leaflet.awesome-markers/dist/leaflet.awesome-markers.css\";\nimport \"@fortawesome/fontawesome-free/css/all.css\";\n\nconst icons = [\n\n    {cat: \"tourism\", tag: [\"hotel\", \"hostel\"], iconType: \"hotel\"},\n    {cat: \"place\",   tag: [\"city\", \"town\", \"neighborhood\"], iconType: \"city\"},\n    {cat: \"place\",   tag: [\"village\", \"hamlet\"], iconType: \"home\"},\n\n    {cat: \"aeroway\", iconType: \"plane\"},\n    {cat: \"shop\", iconType: \"store\"},\n    {cat: \"historic\", iconType: \"monument\"},\n    {cat: \"leisure\", iconType: \"futbol\"},\n    {cat: \"tourism\", iconType: \"compass\"},\n    {cat: \"highway\", iconType: \"road\"},\n    {cat: \"building\", iconType: \"building\"},\n    {cat: \"natural\", iconType: \"tree\"},\n    {cat: \"waterway\", iconType: \"water\"}\n];\n\nconst createIcon = (type, color, shape) => L.AwesomeMarkers.icon({\n    icon: type,\n    prefix: \"fa\",\n    markerColor: color,\n    className: \"awesome-marker awesome-marker-\" + shape\n});\n\nconst createIcons = ({type, shape, color = \"blue\"}) => ({\n    icon: createIcon(type, color, shape),\n    touched: createIcon(type, \"orange\", shape),\n    focused: createIcon(type, \"red\", shape),\n})\n\nconst defaultIcon =  createIcons({type: \"circle\"});\n\nconst iconTypes = icons.map(icon => ({\n    ...icon,\n    ...createIcons({type: icon.iconType})\n}));\n  \nconst getIcon = (item, touched, focused) => {\n    return (\n        iconTypes.find(icon => \n            (!icon.tag && item[icon.cat]) || \n            (item.tags[icon.cat] && item.tags[icon.cat].indexOf(icon.tag) !== -1)\n        ) || \n        defaultIcon\n    )[focused ? \"focused\" : touched ? \"touched\" : \"icon\"];\n};\n\nexport default getIcon;\n","\nimport {useMemo, useRef} from \"react\";\nimport {Marker} from 'react-leaflet';\nimport getIcon from \"./getIcon\";\n\nexport default function MarkerWithFocus({\n    item, touched, focused, position, onClick\n}) {\n    const markerRef = useRef(null)\n    const eventHandlers = useMemo(\n        () => ({\n            click: onClick\n        }),\n      [onClick],\n    );\n    return (\n        <Marker\n            position={position} \n            icon={getIcon(item, touched, focused)}         \n            eventHandlers={eventHandlers}\n            ref={markerRef}\n        >\n        </Marker>\n    )\n}","/* eslint-disable */\n\nconst OSMtiles = {\n    tileUrl: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",  \n    attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n};\n\n// localized tiles \n// note that new translations are applied after while\nconst WikimediaTiles = {\n    tileUrl: \"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png\",\n    attribution: `<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia maps</a> | Map data © <a href=\"http://openstreetmap.org/copyright\">OpenStreetMap contributors</a>`,\n    // this will tell Map component to add ?lang={lang} to tileUrl\n    // lang = first language you will choose in the interface\n    addLang: true\n};\n\nconst mapConfig = {\n    ...OSMtiles,   \n    minZoom: 3,\n    maxZoom: 19\n};\nexport default mapConfig;","\nimport {MapContainer, TileLayer, ScaleControl} from 'react-leaflet';\nimport MapView from \"./MapView\";\nimport MarkerWithFocus from \"./MarkerWithFocus\";\nimport mapConfig from \"../../config/map\";\n\nconst osmCoordsArr = coord => [coord.lat, coord.lon];\nconst getItemPosition = item => osmCoordsArr(item.center || item);\n\nexport default function Map({\n    center, \n    zoom, \n    items, \n    touched,\n    lang = \"en\",\n    focused, \n    handlers: {onMove, onLoad, onClickItem, onClickMap}\n}) {\n    let tileUrl = mapConfig.tileUrl;\n    if(mapConfig.addLang) {\n        tileUrl += \"?lang=\" + lang;\n    }\n    return (\n        <MapContainer \n            center={center} \n            zoom={zoom} \n            scrollWheelZoom={true} \n            minZoom={mapConfig.minZoom}\n            maxZoom={mapConfig.maxZoom}\n        >\n            <TileLayer\n                attribution={mapConfig.attribution}\n                url={tileUrl}\n                minZoom={mapConfig.minZoom}\n                maxZoom={mapConfig.maxZoom}\n            />\n            <MapView \n                center={center}\n                zoom={zoom} \n                onMove={onMove}\n                onLoad={onLoad}\n                onClick={onClickMap}\n            />\n            {items\n            .map(item => (\n                <MarkerWithFocus \n                    item={item}\n                    position={getItemPosition(item)}\n                    touched={touched.indexOf(item.id) !== -1}\n                    focused={focused === item.id}\n                    onClick={() => onClickItem(item.id)}\n                    key={item.id}   \n                />\n            ))}\n            <ScaleControl />\n        </MapContainer>\n    );\n}","import Map from \"./Map\"\nexport default Map;","export default function NotLoggedInGreeting() {\n    return (\n        <div>Login to your OpenStreetMap account to start editing!</div>\n    );\n}","import FormCheck from \"react-bootstrap/FormCheck\";\nimport Button from \"react-bootstrap/Button\";\n\nexport default function CheckboxButton({vkey, title, onChange, checked}) {\n    return (\n    <Button \n        className=\"btn d-flex\"\n        variant={checked ? \"primary\" : \"outline-primary\"}\n        size=\"sm\"\n        onClick={() => onChange(vkey)}\n    >\n        {title}\n        <FormCheck\n            checked={checked}\n            onChange={() => onChange(vkey)}\n        />\n    </Button>\n    );\n}\n\n","import CheckboxButton from \"./CheckboxButton\";\nimport {Fragment} from \"react\";\n\nfunction toggle(selected, key, min) {\n    const i = selected.indexOf(key);\n    if(i === -1) {\n        return [...selected, key];\n    }\n    if(selected.length <= min) {\n        return selected;\n    }\n    return [\n        ...selected.slice(0, i),\n        ...selected.slice(i+1)\n    ];\n}\n\nfunction CheckboxGroup({\n    itemsList, \n    selected, \n    onChange, \n    min = 0,\n    Checkbox = CheckboxButton\n}) {\n    return (\n    <Fragment>\n    {itemsList.map(({key, title}) => \n        <Checkbox \n            key={key} \n            vkey={key}\n            title={title} \n            checked={selected.indexOf(key) !== -1} \n            onChange={() => onChange(toggle(selected, key, min))}\n        />\n    )}\n    </Fragment>\n    );\n}\n\nexport default CheckboxGroup;","import Dropdown from \"react-bootstrap/Dropdown\";\nimport FormCheck from \"react-bootstrap/FormCheck\";\n\nexport default function CheckboxDropdownItem({vkey, title, onChange, checked}) {\n    return (\n    <Dropdown.Item\n        onMouseDown={e => onChange(vkey)}\n        onClick={e => e.stopPropagation()}\n        active={checked}\n    >\n        {title}\n        <FormCheck\n            checked={checked}\n            onMouseDown={e => onChange(vkey)}\n            onChange={() => {}}\n        />\n    </Dropdown.Item>\n    );\n}\n\n","import CheckboxGroup from \"../ItemsFilters/CheckboxGroup\";\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\nimport CheckboxDropdownItem from \"./CheckboxDropdownItem\";\n\nimport {useEffect, useState} from \"react\";\n\nexport default function CheckboxDropdownGroup({title, itemsList, selected, onChange, min}) {\n    // react-bootstrap dropdown has a bad habit to close after selecting an item\n    // that's working with menus okay, but not with checkbox group\n\n    const [dpShow, setDpShow] = useState(false);\n\n    useEffect(() => {\n        if(dpShow) {\n            const fn = document.addEventListener(\"click\", () => {\n                setDpShow(false);\n                document.removeEventListener(\"click\", fn);\n            });\n        }\n    }, [dpShow]);\n\n    const onClickDp = e => {\n        setDpShow(!dpShow);\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    return (\n        <DropdownButton\n            title={title}\n            show={dpShow}\n            onClick={onClickDp}\n            variant=\"outline-primary\"\n        >\n            <CheckboxGroup \n                Checkbox={CheckboxDropdownItem}\n                itemsList={itemsList}\n                selected={selected}\n                rootCloseEvent=\"mousedown\"\n                onChange={onChange}\n                min={min}\n            />\n        </DropdownButton>       \n    );\n}","import Button from \"react-bootstrap/Button\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\nexport default function LoadingButton({title, onClick, loading, disabled, ...props}) {\n    return (\n        <Button \n            disabled={disabled || loading}\n            onClick={onClick}\n            {...props}\n        >{title}\n        {loading ? \n            <Spinner \n                as=\"span\"\n                animation=\"border\"\n                size=\"sm\"\n                className=\"spinner-border ml-2\"\n            /> \n            : null}\n        </Button>\n    );\n}\n","\nimport Form from 'react-bootstrap/Form';\nimport Row from \"react-bootstrap/Row\";\nimport CheckboxGroup from \"./CheckboxGroup\";\nimport CheckboxDropdownGroup from \"./CheckboxDropdownGroup\";\nimport LoadingButton from \"../common/LoadingButton\";\nimport \"./ItemsFilters.css\";\nimport { Col } from 'react-bootstrap';\n\nfunction ItemsFilters({\n    filters, \n    setFilter, \n    tagsList,\n    languages,\n    languagesList, \n    getItems, \n    disabled,\n    loading,\n    updateItems,  \n    setLanguages\n}) {\n    return (\n    <Form className=\"item-filters\">\n        <Row>\n            <Form.Text>\n                Categories\n            </Form.Text>\n        </Row>\n        <Row className=\"form-row row-tags\">\n            <CheckboxGroup \n                itemsList={tagsList}\n                selected={filters.tags}\n                onChange={tags => setFilter({tags})}\n                min={1}\n            />\n        </Row>\n        <Row className=\"d-flex align-items-center\">\n            <Col>\n                <Form.Text className=\"form-text text-left\">\n                    Limit\n                </Form.Text>\n                <Form.Control\n                    label=\"Limit\"\n                    as=\"input\"\n                    type=\"number\"\n                    value={filters.limit}\n                    onChange={e => setFilter({limit: e.target.value})}\n                />\n                <Form.Check \n                    type=\"checkbox\"\n                    className=\"mr-auto text-left\"\n                    checked={filters.hideFilled}\n                    label=\"Hide filled\"\n                    onChange={e => setFilter({hideFilled: e.target.checked})}\n                />\n            </Col>\n            <Col>\n                <CheckboxDropdownGroup \n                    title=\"Languages\"\n                    itemsList={languagesList}\n                    selected={languages}\n                    onChange={setLanguages}\n                    min={1}\n                />    \n            </Col>          \n        </Row>\n        <Row className=\"d-flex justify-content-end\">\n            <LoadingButton \n                title=\"Get names\"\n                size=\"lg\"\n                disabled={disabled.items}\n                onClick={getItems}\n                loading={loading.items}\n            />\n            <LoadingButton \n                title=\"Update names\"\n                size=\"lg\"\n                disabled={disabled.updates}\n                onClick={updateItems}\n                loading={loading.updates}\n            />\n        </Row>                 \n        \n    </Form>\n    );    \n}\n\nexport default ItemsFilters;","import ItemsFilters from \"./ItemsFilters\";\nexport default ItemsFilters;","\nexport default function ItemTableHeader({languages, onClick}) {\n    const titles =  [\"Name\", ...languages.map(lang => `Name:${lang}`)];\n    return (\n        <tr>\n        {titles.map(title => \n            (<th \n                style={{cursor: \"pointer\"}}\n                key={title}\n                onClick={() => onClick(title.toLowerCase())}\n            >{title}\n            </th>))\n        }\n        </tr>\n    );\n}","import {useRef, useEffect} from \"react\";\n\nexport default function Item({\n    item, \n    languages, \n    focused,\n    handlers: {onFocus, onBlur, onChange, onIconClick}\n}) {\n    const firstInput = useRef(null);\n    useEffect(() => {\n        if (focused) {\n            firstInput.current.focus();\n        }\n    }, [focused]);\n    return (\n        <tr key={item.id}>\n            <td>\n                <i \n                    className=\"fa fa-crosshairs icon-btn mt-1\" \n                    style={{float: \"left\"}} \n                    onClick={() => onIconClick(item)}\n                />\n                <span>{item.tags.name}</span>\n            </td>\n            {languages.map((lang, i) => (\n            <td key={lang}>\n                <input\n                    type=\"text\"\n                    ref={i ? null : firstInput}\n                    value={item.tags[`name:${lang}`]||\"\"}    \n                    onChange={e => onChange(item, lang, e.target.value)}\n                    onFocus={() => focused ? null : onFocus(item.id)}\n                    onBlur={() => focused ? onBlur(item.id) : null}\n                />\n            </td>))}\n        </tr>\n    );\n}","\nimport {Fragment, useState} from \"react\";\nimport Table from \"react-bootstrap/Table\";\nimport ItemTableHeader from \"./ItemTableHeader\";\nimport ItemTableRow from \"./ItemTableRow\"\nimport \"./ItemsTable.css\";\n\nconst compareTags = (i1, i2, field) => \n        (i1.tags[field]||\"\").localeCompare(i2.tags[field]||\"\");\n \nfunction ItemsTable({\n    languages, \n    handlers,\n    items, \n    focused,\n}) {\n    const [sortField, setField] = useState(\"name\");\n    const [sortOrder, setOrder] = useState(1);\n\n    const setSort = field => {\n        if(field === sortField)\n            setOrder(-sortOrder);            \n        else\n            setField(field);\n    };\n    \n    return (\n        <Fragment>\n            <Table size=\"sm\">\n                <thead>\n                    <ItemTableHeader \n                        languages={languages} \n                        onClick={setSort}\n                    />\n                </thead>\n                <tbody>\n                    {items\n                    .filter(i => i.tags.name)\n                    .sort((i1, i2) => sortOrder * compareTags(i1, i2, sortField))\n                    .map(item => (\n                    <ItemTableRow\n                        languages={languages} \n                        key={item.id}\n                        item={item}\n                        focused={focused === item.id}\n                        handlers={handlers}\n                    />)\n                    )}\n                </tbody>\n            </Table>\n        </Fragment>\n    );\n    \n}\n\nexport default ItemsTable;","import ItemsTable from \"./ItemsTable\";\nexport default ItemsTable;","import {Fragment} from \"react\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Button from \"react-bootstrap/Button\";\nimport Image from \"react-bootstrap/Image\";\n\nexport default function UserLoggedIn({user, logout}) {\n    return (\n        <Fragment>\n            {user.img ? \n                <Image \n                    src={user.img.href}\n                    className=\"avatar\" \n                    thumbnail \n                    rounded\n                /> \n                : null\n            }\n            <Navbar.Text className=\"mx-2\"\n                >{user.display_name}\n            </Navbar.Text>\n            <Button onClick={logout}>Logout</Button>\n        </Fragment>\n    );\n}","import LoadingButton from \"../common/LoadingButton\";\n\nexport default function UserLoggedOut({login, loading}) {\n    return (\n        <LoadingButton \n            title=\"login\"\n            loading={loading}\n            onClick={login}\n        />\n    );\n}\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import AppNavbar from \"./AppNavbar\";\n\nexport default AppNavbar;","\nimport Navbar from \"react-bootstrap/Navbar\";\nimport \"./AppNavbar.css\";\nimport UserLoggedIn from \"./UserLoggedIn\";\nimport UserLoggedOut from \"./UserLoggedOut\";\nimport logo from \"../../assets/logo.svg\";\n\nexport default function AppNavbar({user, login, logout, loading}) {\n    return (\n        <Navbar \n            variant=\"light\"\n            bg=\"white\"\n        >\n            <Navbar.Brand className=\"mr-auto\">\n                <img \n                    src={logo}\n                    alt=\"App logo\"\n                    className=\"mx-1 avatar\"\n                />\n                OpenStreetMap Localization Tool                \n            </Navbar.Brand>\n        {user.loggedIn ? \n            <UserLoggedIn \n                logout={logout} \n                user={user} \n            />\n            : <UserLoggedOut \n                login={login} \n                loading={loading} \n            />\n        }\n        </Navbar>\n    );\n}\n","const defaultApiUrl = \"https://overpass-api.de/api/interpreter\";\n\nexport default class Overpass {\n    constructor(config = {}) {\n        this.apiUrl = config.apiUrl || defaultApiUrl;\n    }\n    query({bbox, zoom, center, filters, languages}) {\n        const baseEls = filters.tags.map(t => `nwr[\"${t}\"][\"name\"]`);\n        const radius = 75000;\n        const area = zoom > 1 ?\n            `(${bbox.join(\",\")})`\n            : `(around:${radius},${center.join(\",\")})`;\n\n\n        const elementsQuery = (filters.hideFilled ? \n            baseEls.map(base => \n                languages.map(l => `${base}[!\"name:${l}\"]${area}`)\n                .join(\";\\n\")\n            )\n            : baseEls.map(base => base + area))\n            .join(\";\\n\");\n\n        const outTypes = \"qt body meta center\"; //we need meta for \"version\" field \n        const limit = filters.limit ? \" \" + filters.limit : \"\";\n        const query = \n            `[out:json][timeout:25];\n            (\n                ${elementsQuery};\n            );\n            out ${outTypes} ${limit};`;\n\n        const data = new FormData();\n        data.append(\"data\", query);\n        const reqId = performance.now();\n        this.reqId = reqId;\n        return new Promise((resolve, reject) => {\n            fetch(this.apiUrl, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\"\n                },\n                body: new URLSearchParams(data)\n            })\n            .then(response => response.ok ? \n                response.json()\n                .then(({elements, remark}) => {\n                    if(this.reqId !== reqId)\n                        reject();\n                    else {\n                        if(remark && remark.indexOf(\"error\") !== -1) {\n                            reject(remark);\n                        }\n                        resolve(elements);\n                    }\n                }) :\n                response.text()\n                .then(reject)\n                \n                )\n            .catch(err => reject(err));\n        })\n    }\n}","import osmAuth from \"osm-auth\";\nimport Overpass from \"./Overpass\";\n\n// tag to identify changesets created by app\nconst appTag = \"OSM-Localization-Web\";\n// comment tag in changeset\nconst appComment = \"Adding localized names\";\n\nfunction json2xml(json) {\n    return Object.entries(json)\n    .map(([k, v]) => {\n        let attrs = [];\n        let children = \"\";\n        Object.entries(v)\n        .forEach(([k1, v1]) => {\n            if(Array.isArray(v1)) {\n                const k11 = k1.replace(/s$/, \"\");\n                children += v1.map(obj => json2xml({[k11]: obj}))\n                            .join(\"\");\n            } else if(typeof(v1) === \"object\") {\n                children += json2xml({[k1]: v1});\n            } else {\n                attrs.push([k1, v1]);\n            }\n        });\n        const attrsStr = attrs.map(([k1, v1]) => `${k1}=\"${v1}\"`).join(\" \");\n        return children ? \n        `<${k} ${attrsStr}>${children}</${k}>`\n        : `<${k} ${attrsStr}/>`;\n    })\n    .join(\"\");\n}\n\nfunction createChangeset() {\n    return json2xml({\n        osm: {\n            changeset: [\n                {tag: {k: \"created_by\", v: appTag}},\n                {tag: {k: \"comment\",    v: appComment}}\n            ]\n        }\n    });\n}\n\n\nfunction createOsmChange(updates, changesetId) {\n    return json2xml({\n        osmChange: {\n            version: \"0.6\",\n            generator: appTag,\n            modify: Object.values(updates)\n                    .map(({type, tags, nodes, members, ...attrs}) => ({\n                        [type]: {\n                            ...attrs,\n                            changeset: changesetId,\n                            tags: Object.entries(tags)\n                                    .map(([k, v]) => ({k, v})),\n                            // way\n                            ...(nodes ? {nd: nodes.map(id => ({ref: id}))} : {}),\n                            // relation\n                            ...(members ? {members} : {})\n                        }\n                    }))               \n        }\n    });\n}\n\n\nexport default class OSMApi {\n    constructor(config) {\n        this.config = config;\n        this.auth = osmAuth({\n            ...config\n        });\n        this.overpass = new Overpass({\n            apiUrl: config.overpassApiUrl\n        });\n        this.apiRoute = \"/api/0.6\";\n        this.currentChangeset = config.changeset || false;\n    }\n    fetch(route, options = {}) {\n        // wrapper for osm-auth and underlying ohauth to provide\n        // more fetch-alike interface        \n        const {method, body, headers = {}, ...opts} = options;\n        return new Promise((resolve, reject) => \n            this.auth.xhr({\n                method: method || 'GET',\n                path: this.apiRoute + route,\n                content: body,\n                options: {\n                    header: headers,\n                    ...opts\n                }\n            }, function(err, res) {\n                if(!err) {\n                    resolve(res);\n                } else {\n                    reject(err);\n                }                \n            })\n        );    \n    }\n    fetchJson(route, options) {\n        return this.fetch(route, options)\n                .then(res => JSON.parse(res));\n    }\n    authenticated() {\n        return this.auth.authenticated();\n    }\n    login() {\n        return new Promise(resolve => \n            this.auth.authenticate(res => {\n                resolve(res);\n            })\n        );\n    }\n    logout() {\n        this.auth.logout();\n    }\n    getUser() {\n        return this.fetchJson(\"/user/details.json\");            \n    }\n    getElements(opts) {\n        return this.overpass.query(opts);\n    }\n    updateElements(updates) {\n        if(!this.currentChangeset) {\n            return this.createChangeset()\n            .then(() => this.updateChangeset(updates));\n        }\n        return this.checkChangesetOpen()\n        .then(open => {\n            if(!open) {\n                return this.createChangeset()\n                .then(() => this.updateChangeset(updates));\n            }\n            return this.updateChangeset(updates);\n        });\n    }\n    getChangesets() {\n        return this.fetch(\"/changesets\");\n    }\n    createChangeset() {\n        return this.fetch(\"/changeset/create\", {\n            method: \"PUT\",\n            body: createChangeset(),\n            headers: {\n                'Content-Type': \"text/plain\"\n            }       \n        }).then(createdId => {\n            this.currentChangeset = createdId;\n        });        \n    }\n    checkChangesetOpen() {\n        return this.fetchJson(`/changeset/${this.currentChangeset}.json`)\n        .then(res => {\n            return res.elements?.pop().open;\n        })\n    }\n    updateChangeset(updates) {\n        return this.fetch(`/changeset/${this.currentChangeset}/upload`, {\n            method: \"POST\",\n            body: createOsmChange(updates, this.currentChangeset),\n            headers: {\n                'Content-Type': \"text/plain\"\n            }   \n        })\n        .then(diffRes => {\n            // the format of responce is xml document like:\n            //\n            // <diffResult generator=\"OpenStreetMap Server\" version=\"0.6\">\n\t        //     <node|way|relation old_id=\"#\" new_id=\"#\" new_version=\"#\"/>\n            //  </diffResult>\n            //\n            // old_id == new_id, because we apply only modify             \n\n            return Object.fromEntries(\n                Array.from(diffRes.children[0].children)\n                .map(el => [\n                    el.getAttribute(\"new_id\"), {\n                        version: +el.getAttribute(\"new_version\")\n                    }]));\n        });\n    }\n    closeChangeset() {\n        return this.fetch(`/changeset/${this.currentChangeset}/close`,{\n            method: \"PUT\",\n            headers: {\n                'Content-Type': \"text/plain\"\n            }   \n        })\n    }\n}","// Some abstraction for document.cookie handling\n\nexport default class CookieManager {\n    constructor(duration = 365 * 24 * 3600) {\n        this.cookieDuration = duration;\n    }\n    \n    get(key) {\n        const value = document.cookie.split(';')\n                                     .find(s => s.indexOf(key + '=') !== -1);\n        return value ? \n              value.replace(key + '=', '').trim() \n            : false;\n    }\n    write(dict, duration = this.cookieDuration) {\n        const dateStr = new Date(Date.now() + duration * 1000)\n                            .toUTCString();\n\n        Object.entries(dict)\n        .forEach(([k, v]) => {\n            document.cookie = `${k}=${v}; path=/; expires=${dateStr}`;\n        });\n    }\n\n    clear() {        \n        document.cookie.split(';')\n        .forEach(s => {\n            const k = s.split('=')[0];\n            document.cookie = `${k}=; path=/`;\n        });\n    }\n}\n","// helper class to sync results from overpass api with latest updates\n\nconst hasEmpty = (item, langs) => langs.find(l => !(item.tags[`name:${l}`]));\n\n\nexport default class UpdatesStorage {\n    updates = {};\n    storageKey = \"osm-localizer_updated-items\";\n    load() {\n        if(window.localStorage) {\n            const data = localStorage.getItem(this.storageKey);\n            if(data) {\n                this.updates = JSON.parse(data);\n            }\n        }\n    }\n    store() {\n        if(window.localStorage) {\n            localStorage.setItem(this.storageKey, JSON.stringify(this.updates));\n        }\n    }\n    patchAndStore(items, diff) {\n        for(let id in diff) {\n            if(items[id]) {\n                items[id] = {...items[id], ...diff[id]};\n                this.updates[id] = items[id];\n            }\n        }\n        this.store();\n    }\n    sync(items, hideFilled, langs) {\n        const itemsSync = [];\n        for(let i = 0, n = items.length; i < n; i++) {\n            const id = items[i].id;\n            if(this.updates[id]) {\n                if(this.updates[id].version > items[i].version) {\n                    // if hideFilled = true, then we need manually filter out\n                    // items with filled fields, which operass doesn't know\n                    // about yet.\n                    if(!hideFilled || hasEmpty(this.updates[id], langs))\n                        itemsSync.push(this.updates[id]);\n                } else {\n                    delete this.updates[id];\n                    itemsSync.push(items[i]);\n                }\n            } else {\n                itemsSync.push(items[i]);\n            }\n        }\n        this.store();\n        return itemsSync;\n    }\n}","/* eslint-disable */\n\nconst mainServer = {\n    oauth_consumer_key: \"p2szywibtwHNFh1RZVNq21uCo9XBuUZvEwz0sYae\",\n    oauth_secret:       \"e2oP3FSVjFLEq3zgQylpYMVVX7QJUKcchJLh4Ksm\",\n    url:                \"https://www.openstreetmap.org\",\n};\n\n// use this when testing new features to not spoil main osm database\nconst devServer = {\n    oauth_consumer_key: '8CxsQfI9MFfsYm4nq8bBm6Htch3SiK9BFA8IQhHs',\n    oauth_secret:       'SZka3I7w1Z41ePlQDauVwLLt6UIG4LLDbaWhNHkM',\n    url:                \"https://master.apis.dev.openstreetmap.org\"\n};\n\nconst authConfig = {   \n    ...mainServer,\n    overpassApiUrl:     \"https://overpass.kumi.systems/api/interpreter\"\n};\nexport default authConfig;","\nconst languagesList = [ \n    { key: \"de\", title: \"Deutsch\" },\n    { key: \"en\", title: \"English\" },\n    { key: \"fr\", title: \"Français\"},\n    { key: \"ja\", title: \"日本語\" },\n    { key: \"ru\", title: \"Русский\" },\n    { key: \"zh\", title: \"中文\" }\n];\n\nconst tagsList = [\n    {key: \"aerialway\",          title: \"Aerialway\"},\n    {key: \"aerolway\",           title: \"Aeroway\"},\n    {key: \"amenity\",            title: \"Amenity\"},\n    {key: \"barrier\",            title: \"Barrier\"},\n    {key: \"boundary\",           title: \"Boundary\" },\n    {key: \"building\",           title: \"Building\" },\n    {key: \"craft\",              title: \"Craft\" },\n    {key: \"emergency\",          title: \"Emergency\" },\n    {key: \"geological\",         title: \"Geological\" },\n    {key: \"healthcare\",         title: \"Healthcare\"},\n    {key: \"highway\",            title: \"Highway\"},\n    {key: \"historic\",           title: \"Historic\"},\n    {key: \"landuse\",            title: \"Landuse\"},\n    {key: \"leisure\",            title: \"Leisure\"},\n    {key: \"man_made\",           title: \"Man-made\"},\n    {key: \"military\",           title: \"Military\"},\n    {key: \"natural\",            title: \"Natural\"},\n    {key: \"office\",             title: \"Office\"},\n    {key: \"place\",              title: \"Place\" },\n    {key: \"power\",              title: \"Power\" },\n    {key: \"public_transport\",   title: \"Public transport\" },\n    {key: \"railway\",            title: \"Railway\" },\n    {key: \"route\",              title: \"Route\" },\n    {key: \"shop\",               title: \"Shop\" },\n    {key: \"telecom\",            title: \"Telecom\" },\n    {key: \"tourism\",            title: \"Tourism\" },\n    {key: \"waterway\",           title: \"Waterway\"}\n];\n\nexport {\n    languagesList, \n    tagsList\n};","import {Fragment, Component} from \"react\";\nimport Container from 'react-bootstrap/Container';\nimport Card from \"react-bootstrap/Card\";\nimport Map from \"./components/Map\";\nimport NotLoggedInGreeting from \"./components/NotLoggedInGreeting\";\nimport ItemsFilters from \"./components/ItemsFilters\";\nimport ItemsTable from \"./components/ItemsTable\";\nimport AppNavbar from \"./components/AppNavbar\";\nimport OSMApi from \"./api/OSM\";\nimport CookieManager from \"./utils/CookieManager\";\nimport UpdatesStorage from \"./utils/UpdatesStorage\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n\nimport authConfig from \"./config/auth\";\nimport {languagesList, tagsList} from \"./config/interface\";\nimport history from \"history/browser\";\n\nconst cookieKeys = {\n    languages: \"_osm-localization_languages\",\n    changeset: \"_osm-locatization_changeset\"\n};\n\nconst itemCenter = item => item.center ? \n                            [item.center.lat, item.center.lon] \n                          : [item.lat, item.lon];\nconst itemMinZoom = 14;\n\n\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.cookieManager = new CookieManager();\n        this.osmApi = new OSMApi({\n            ...authConfig,\n            changeset: this.cookieManager.get(cookieKeys.changeset)\n        }); \n        this.updatesStorage = new UpdatesStorage();\n        this.updatesStorage.load();\n        const {zoom, center} = this.parseURLPath();\n        const filters = this.parseURLQuery();\n        \n        this.bbox = [];\n        this.state = {\n            user: {\n                loggedIn: false\n            },\n            center,\n            zoom,\n            filters,\n            items: [],\n            itemsToUpdate: {},\n            focusedItem: false,\n            watchFocus: false, // center map on focused item\n            loading: {\n                items: false,\n                updates: false,\n                auth: false\n            },\n            serverMsg: {\n                error: false,\n                text: \"\"\n            }\n        };\n    }\n    parseURLPath() {\n        let zoom = 6;\n        let center = [0, 0];\n        const hash = history.location.hash.replace(\"#/\", \"\");\n        if (hash) {\n            const [z, lat, lng] = hash.split(\"/\");\n            zoom = +z;\n            center = [+lat, +lng];\n        } \n\n        return {zoom, center};\n    }\n    parseURLQuery() {\n        const filters = {\n            tags: [\"place\"],\n            limit: 100,\n            hideFilled: false\n        };\n        const search = history.location.search.replace(\"?\", \"\");\n        if(search) {\n            const params = Object.fromEntries(\n                search.split(\"&\")\n                .map(e => e.split(\"=\"))\n            );\n            if(params.tags) {               \n                const cleanedTags = params.tags.split(\",\")\n                    .filter(t => tagsList.find(t1 => t1.key === t));\n                if(cleanedTags.length)\n                    filters.tags = cleanedTags;\n            }\n            if(params.limit) {\n                const n = parseInt(params.limit);\n                if(!isNaN(n)) \n                    filters.limit = n;\n            }\n            if(params.hide_filled) {\n                filters.hideFilled = params.hide_filled && \n                                    +params.hide_filled !== 0;\n            }\n        }\n        return filters;        \n    }\n    updateLocation() {\n        const {\n            zoom, \n            center: [lat, lng], \n            filters: {tags, limit, hideFilled}\n        } = this.state;\n\n        const hash = [\"/#\", zoom, lat.toFixed(4), lng.toFixed(4)].join(\"/\");\n        const searchParts = [`tags=${tags.join(\",\")}`];        \n        if(limit) \n            searchParts.push(`limit=${limit}`);\n        if(hideFilled)\n            searchParts.push(`hide_filled=1`);\n        const search = \"?\" + searchParts.join(\"&\");\n        \n        history.push({search, hash});\n\n    }\n    componentDidMount() {\n        if(this.osmApi.authenticated()) {\n            this.getUser(); \n        }\n    }\n    setServerMsg(serverMsg) {\n        this.setState({serverMsg});\n        const fn = () => {\n            document.removeEventListener(\"click\", fn);\n            this.setState({serverMsg: {\n                error: false,\n                text: \"\"\n            }});\n        } \n        document.addEventListener(\"click\", fn);\n    }\n    login() {\n        this.setState({\n            loading: {\n                ...this.state.loading,\n                auth: true\n            }\n        });\n        this.osmApi.login()\n        .then(() => {\n            this.getUser();\n        });\n    }\n    getLanguages() {\n        const str = this.cookieManager.get(cookieKeys.languages);\n        return str ? str.split(\"+\") : false;\n    }\n    setLanguages(languages) {\n        this.setState({\n            user: {\n                ...this.state.user,\n                languages\n            }\n        });\n        this.storeLanguages(languages);\n    }\n    storeLanguages(languages) {\n        this.cookieManager.write({\n            [cookieKeys.languages]: languages.join(\"+\")\n        });\n    }\n    getUser() {\n        this.osmApi.getUser()\n        .then(res => {\n            let languages = this.getLanguages() ||\n                            res.user.languages.filter(l => \n                                languagesList.find(({key}) => key === l)\n                            );\n            this.setState({\n                loading: {\n                    ...this.state.loading,\n                    auth: false\n                },\n                user: {\n                    loggedIn: true,\n                    ...res.user,\n                    languages\n                }\n            });\n            this.storeLanguages(languages);\n        });           \n    }\n    logout() {\n        this.osmApi.logout();\n        this.setState({\n            user: {\n                loggedIn: false\n            }\n        });\n    }\n    getItems() {\n        this.setState({\n            loading: {\n                ...this.state.loading,\n                items: true\n            }\n        });\n        this.osmApi.getElements({\n            center: this.state.center,\n            zoom: this.state.zoom,\n            bbox: this.bbox, \n            filters: this.state.filters,\n            languages: this.state.user.languages\n        })\n        .then(items => {\n            this.setState({\n                items: this.updatesStorage.sync(items, \n                                                this.state.filters.hideFilled, \n                                                this.state.user.languages), \n                itemsToUpdate: {},\n                loading: {\n                    ...this.state.loading,\n                    items: false\n                }\n            });\n        })\n        .catch(err => {\n            console.log(err)\n            this.setState({\n                loading: {\n                    ...this.state.loading,\n                    items: false\n                }\n            });\n            this.setServerMsg({\n                text: err,\n                error: true\n            });\n        });\n    }\n    updatePosition({bbox, center, zoom}) {\n        this.setState(\n            {center, zoom}, \n            () => this.updateLocation());\n        this.bbox = bbox;\n    }\n    updateBbox({bbox}) {\n        this.bbox = bbox; \n    }\n    updateItem(item, lang, value) {\n        item.tags[`name:${lang}`] = value;\n        this.setState({itemsToUpdate: {\n            ...this.state.itemsToUpdate,\n            [item.id]: item\n        }});\n    }\n    setFilter(updates) {\n        this.setState({\n            filters: {\n                ...this.state.filters,\n                ...updates\n            }\n        }, () => this.updateLocation());\n    }\n    updateItems() {\n        this.setState({\n            loading: {\n                ...this.state.loading,\n                updates: true\n            }\n        });\n        this.osmApi.updateElements(this.state.itemsToUpdate)\n        .then(diff => {\n            this.updatesStorage.patchAndStore(\n                this.state.itemsToUpdate, diff\n            );\n\n            this.cookieManager.write({\n                [cookieKeys.changeset]: this.osmApi.currentChangeset\n            });\n\n            this.setServerMsg({\n                text: \"Items are successfully updated.\",\n                error: false\n            });\n\n            this.setState({\n                itemsToUpdate: {},\n                loading: {\n                    ...this.state.loading,\n                    updates: false\n                }\n            });\n        })\n        .catch(err => {\n            this.setServerMsg({\n                text: String.toString(err),\n                error: true\n            });\n\n            this.setState({\n                loading: {\n                    ...this.state.loading,\n                    updates: false\n                }\n            });\n        });\n    }\n    focusItem(itemId) {\n        if(this.state.watchFocus) {\n            const item = this.state.items.find(i => i.id === itemId);\n            this.setState({\n                center: itemCenter(item),\n                focusedItem: itemId\n            });\n        } else this.setState({\n            focusedItem: itemId\n        });\n    }\n    blurItem() {\n        this.setState({\n            focusedItem: false\n        });\n    }\n    centerItem(item) {\n        this.setState({\n            center: itemCenter(item),\n            zoom: Math.max(this.state.zoom, itemMinZoom)\n        });\n    }\n    render() {\n        const btnsDisabled = {\n            // query for a large bbox is too slow and won't work\n            // also don't load new items till updates are not done and synced\n            items: this.state.zoom < 10 || this.state.loading.updates, \n            // nothing to update\n            updates: !Object.keys(this.state.itemsToUpdate).length\n        };\n        const touchedItems  = Object.keys(this.state.itemsToUpdate).map(s => +s);\n        const mapHandlers = {\n            onLoad:      this.updateBbox.bind(this),\n            onMove:      this.updatePosition.bind(this),\n            onClickItem: this.focusItem.bind(this),\n            onClickMap:  this.blurItem.bind(this),\n        };\n\n        const itemHandlers = {\n            onFocus:     this.focusItem.bind(this),\n            onBlur:      this.blurItem.bind(this),\n            onChange:    this.updateItem.bind(this),\n            onIconClick: this.centerItem.bind(this)\n        };\n        const lang = this.state.user.languages ? \n            this.state.user.languages[0] \n            : \"en\";\n\n        return (            \n            <Container className=\"App\" fluid>\n                <AppNavbar\n                    login={this.login.bind(this)}\n                    logout={this.logout.bind(this)}\n                    user={this.state.user}\n                    loading={this.state.loading.auth}\n                />\n                <Map \n                    zoom={this.state.zoom}\n                    center={this.state.center}\n                    items={this.state.items}\n                    lang={lang}\n                    touched={touchedItems}\n                    focused={this.state.focusedItem}\n                    watchFocus={this.state.watchFocus}\n                    handlers={mapHandlers}\n                />\n                <Card \n                    className=\"card-items card p-1\"\n                >{\n                this.state.user.loggedIn ? \n                    <Fragment>\n                        <Card.Header>\n                            <ItemsFilters \n                                filters={this.state.filters}\n                                setFilter={this.setFilter.bind(this)}\n                                tagsList={tagsList}\n                                loading={this.state.loading}\n                                languages={this.state.user.languages||[]}\n                                languagesList={languagesList}\n                                setLanguages={this.setLanguages.bind(this)}\n                                items={this.state.items}\n                                getItems={this.getItems.bind(this)}\n                                disabled={btnsDisabled}\n                                updateItems={this.updateItems.bind(this)}\n                            /> \n                            <div className={this.state.serverMsg.error ? \n                                              \"text-danger\" \n                                            : \"text-success\"}>\n                                {this.state.serverMsg.text}\n                            </div> \n                        </Card.Header>\n                        <Card.Body\n                            className={this.state.loading.items ? \n                                      \"items-loading\" \n                                      : \"\"}\n                        >\n                            <ItemsTable \n                                languages={this.state.user.languages||[]}\n                                items={this.state.items}\n                                focused={this.state.focusedItem}\n                                handlers={itemHandlers}\n                            /> \n                        \n                        </Card.Body>\n                    </Fragment>\n                    :  <Card.Body className=\"d-flex align-items-center justify-content-center\">\n                            <NotLoggedInGreeting />\n                        </Card.Body>\n                }</Card>               \n            </Container>\n        );\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}